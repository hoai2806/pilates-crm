{% extends 'reback/layout.html' %}
{% load i18n %}

{% block title %}{{ title }}{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item"><a href="{% url 'reback:index' %}">Dashboard</a></li>
<li class="breadcrumb-item"><a href="{% url 'reback:customers' %}">Khách hàng</a></li>
<li class="breadcrumb-item active">{{ title }}</li>
{% endblock %}

{% block page_heading %}{{ form_title }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-12">
            <div class="card shadow-sm" style="max-width:1200px;margin:auto;background:#fff;border-radius:12px;">
                <div class="card-body p-4">
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-6">
                                <h5 class="mb-3">Thông tin cá nhân</h5>
                                <div class="mb-3">
                                    <label for="{{ form.full_name.id_for_label }}" class="form-label">{{ form.full_name.label }}</label>
                                    {{ form.full_name }}
                                    {% if form.full_name.errors %}<div class="invalid-feedback d-block">{{ form.full_name.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.date_of_birth.id_for_label }}" class="form-label">{{ form.date_of_birth.label }}</label>
                                    {{ form.date_of_birth }}
                                    {% if form.date_of_birth.errors %}<div class="invalid-feedback d-block">{{ form.date_of_birth.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.gender.id_for_label }}" class="form-label">{{ form.gender.label }}</label>
                                    {{ form.gender }}
                                    {% if form.gender.errors %}<div class="invalid-feedback d-block">{{ form.gender.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.profile_image.id_for_label }}" class="form-label">{{ form.profile_image.label }}</label>
                                    {{ form.profile_image }}
                                    {% if form.profile_image.errors %}<div class="invalid-feedback d-block">{{ form.profile_image.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.address.id_for_label }}" class="form-label">{{ form.address.label }}</label>
                                    {{ form.address }}
                                    {% if form.address.errors %}<div class="invalid-feedback d-block">{{ form.address.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.phone.id_for_label }}" class="form-label">{{ form.phone.label }}</label>
                                    {{ form.phone }}
                                    {% if form.phone.errors %}<div class="invalid-feedback d-block">{{ form.phone.errors }}</div>{% endif %}
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h5 class="mb-3">Liên hệ & Gia đình</h5>
                                <div class="mb-3">
                                    <label for="{{ form.emergency_contact.id_for_label }}" class="form-label">{{ form.emergency_contact.label }}</label>
                                    {{ form.emergency_contact }}
                                    {% if form.emergency_contact.errors %}<div class="invalid-feedback d-block">{{ form.emergency_contact.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.parent_name.id_for_label }}" class="form-label">{{ form.parent_name.label }}</label>
                                    {{ form.parent_name }}
                                    {% if form.parent_name.errors %}<div class="invalid-feedback d-block">{{ form.parent_name.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.parent_phone.id_for_label }}" class="form-label">{{ form.parent_phone.label }}</label>
                                    {{ form.parent_phone }}
                                    {% if form.parent_phone.errors %}<div class="invalid-feedback d-block">{{ form.parent_phone.errors }}</div>{% endif %}
                                </div>
                                <h5 class="mb-3 mt-4">Sức khỏe</h5>
                                <div class="mb-3">
                                    <label for="{{ form.health_issues.id_for_label }}" class="form-label">{{ form.health_issues.label }}</label>
                                    {{ form.health_issues }}
                                    {% if form.health_issues.errors %}<div class="invalid-feedback d-block">{{ form.health_issues.errors }}</div>{% endif %}
                                </div>
                                <h5 class="mb-3 mt-4">Trạng thái & Ghi chú</h5>
                                <div class="mb-3">
                                    <label for="{{ form.status.id_for_label }}" class="form-label">{{ form.status.label }}</label>
                                    {{ form.status }}
                                    {% if form.status.errors %}<div class="invalid-feedback d-block">{{ form.status.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.source.id_for_label }}" class="form-label">{{ form.source.label }}</label>
                                    {{ form.source }}
                                    {% if form.source.errors %}<div class="invalid-feedback d-block">{{ form.source.errors }}</div>{% endif %}
                                </div>
                                <div class="mb-3">
                                    <label for="{{ form.notes.id_for_label }}" class="form-label">{{ form.notes.label }}</label>
                                    {{ form.notes }}
                                    {% if form.notes.errors %}<div class="invalid-feedback d-block">{{ form.notes.errors }}</div>{% endif %}
                                </div>
                                <div class="form-check mb-3">
                                    {{ form.active }} <label for="{{ form.active.id_for_label }}" class="form-check-label">{{ form.active.label }}</label>
                                    {% if form.active.errors %}<div class="invalid-feedback d-block">{{ form.active.errors }}</div>{% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="mt-4">
                            <button type="submit" class="btn btn-primary">{{ submit_button_text }}</button>
                            {% if customer %}
                                <a href="{% url 'reback:customer_detail' customer.pk %}" class="btn btn-secondary">Hủy</a>
                            {% else %}
                                <a href="{% url 'reback:customers' %}" class="btn btn-secondary">Hủy</a>
                            {% endif %}
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 