{% load static i18n %}
<!DOCTYPE html>
{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <title>
        {% block title %}{{ title }}{% endblock title %} | Reback Admin
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Pilates CRM Admin Dashboard"/>
    <link rel="icon" href="{% static 'images/favicon.ico' %}"/>

    {% block css %}
        <!-- Vendor CSS -->
        <link href="{% static 'css/vendors.min.css' %}" rel="stylesheet"/>
        <link href="{% static 'css/app.min.css' %}" rel="stylesheet"/>
        <link href="{% static 'css/icons.min.css' %}" rel="stylesheet"/>
        
        <!-- Bootstrap CSS từ CDN -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Font từ Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

        <!-- Scripts -->
        <script defer src="{% static 'js/config.min.js' %}"></script>
        <script defer src="{% static 'js/layout.min.js' %}"></script>
        
        <!-- Custom CSS -->
        <style>
            body {
                font-family: 'Inter', sans-serif;
                background: #f8f9fa;
            }
            .navbar-custom {
                background-color: #5664d2;
                padding: 0.75rem 1.5rem;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .navbar-brand {
                color: #fff;
                font-weight: 600;
            }
            .navbar-nav .nav-link {
                color: rgba(255,255,255,0.8);
            }
            .navbar-nav .nav-link:hover {
                color: #fff;
            }
            .sidebar {
                background: #fff;
                border-right: 1px solid rgba(0,0,0,0.05);
                height: calc(100vh - 70px);
                width: 250px;
                position: fixed;
                left: 0;
                top: 70px;
                overflow-y: auto;
                z-index: 100;
                padding-top: 20px;
                box-shadow: 0 0 15px rgba(0,0,0,0.05);
            }
            .sidebar-menu {
                list-style: none;
                padding: 0;
                margin: 0;
            }
            .sidebar-menu li {
                padding: 0;
                margin: 0;
            }
            .sidebar-menu li a {
                display: block;
                padding: 12px 20px;
                color: #6c757d;
                text-decoration: none;
                transition: all 0.3s;
            }
            .sidebar-menu li a:hover, .sidebar-menu li a.active {
                color: #5664d2;
                background: rgba(86, 100, 210, 0.1);
            }
            .sidebar-menu li a i {
                margin-right: 10px;
                font-size: 18px;
                width: 20px;
                text-align: center;
            }
            .main-content {
                margin-left: 250px;
                padding: 20px;
            }
            .card {
                box-shadow: 0 0 10px rgba(0,0,0,0.05);
                border: none;
                margin-bottom: 24px;
            }
            .card-header {
                background-color: transparent;
                border-bottom: 1px solid rgba(0,0,0,0.05);
                padding: 16px 20px;
                font-weight: 600;
            }
            .stats-card {
                background: #fff;
                border-radius: 8px;
                padding: 20px;
                margin-bottom: 20px;
                box-shadow: 0 0 10px rgba(0,0,0,0.05);
            }
            .stats-card-title {
                font-size: 14px;
                color: #6c757d;
                margin-bottom: 10px;
            }
            .stats-card-value {
                font-size: 24px;
                font-weight: 600;
                color: #343a40;
            }
            .stats-card-icon {
                width: 48px;
                height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 8px;
                font-size: 24px;
            }
            .bg-primary-light {
                background: rgba(86, 100, 210, 0.2);
                color: #5664d2;
            }
            .bg-success-light {
                background: rgba(10, 187, 135, 0.2);
                color: #0abb87;
            }
            .bg-warning-light {
                background: rgba(255, 159, 67, 0.2);
                color: #ff9f43;
            }
            .bg-danger-light {
                background: rgba(234, 84, 85, 0.2);
                color: #ea5455;
            }
            .timeline-item {
                position: relative;
                padding-bottom: 1rem;
                border-left: 2px solid #e9ecef;
                padding-left: 20px;
            }
            .timeline-item:before {
                content: '';
                position: absolute;
                left: -7px;
                top: 0;
                width: 12px;
                height: 12px;
                border-radius: 50%;
                background: #5664d2;
            }
            .timeline-item:last-child {
                border-left: 2px solid transparent;
            }
            .avatar-circle {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: #fff;
                font-weight: 600;
                font-size: 16px;
            }
            .upcoming-class-item {
                padding: 12px 0;
                border-bottom: 1px solid #f0f0f0;
            }
            .upcoming-class-item:last-child {
                border-bottom: none;
            }
            .page-heading {
                font-size: 1.5rem;
                font-weight: 600;
                margin-bottom: 1.5rem;
                color: #343a40;
            }
            .breadcrumb {
                background: transparent;
                padding: 0;
                margin-bottom: 1rem;
            }
            .breadcrumb-item a {
                color: #5664d2;
                text-decoration: none;
            }
            .breadcrumb-item.active {
                color: #6c757d;
            }
            .table-responsive {
                overflow-x: auto;
            }
            .table {
                width: 100%;
                margin-bottom: 1rem;
                color: #212529;
                border-collapse: collapse;
            }
            .table th {
                font-weight: 600;
                padding: 0.75rem;
                vertical-align: top;
                border-top: 1px solid #dee2e6;
                background-color: #f8f9fa;
            }
            .table td {
                padding: 0.75rem;
                vertical-align: top;
                border-top: 1px solid #dee2e6;
            }
            .pagination {
                justify-content: center;
                margin-top: 1rem;
            }
            .page-link {
                color: #5664d2;
            }
            .page-item.active .page-link {
                background-color: #5664d2;
                border-color: #5664d2;
            }
            .form-control:focus {
                border-color: #5664d2;
                box-shadow: 0 0 0 0.2rem rgba(86, 100, 210, 0.25);
            }
            .btn-primary {
                background-color: #5664d2;
                border-color: #5664d2;
            }
            .btn-primary:hover {
                background-color: #4553c0;
                border-color: #4553c0;
            }
        </style>
        
        {% block extra_css %}{% endblock extra_css %}
    {% endblock css %}

</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'reback:index' %}">Reback Admin</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="ri-notification-3-line"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#"><i class="ri-settings-3-line"></i></a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/admin/logout/"><i class="ri-logout-box-line"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Sidebar & Main Content -->
    <div class="d-flex">
        <div class="sidebar">
            <ul class="sidebar-menu">
                <li>
                    <a href="{% url 'reback:index' %}" class="{% if request.path == '/reback/' %}active{% endif %}">
                        <i class="ri-dashboard-line"></i> Dashboard
                    </a>
                </li>
                <li>
                    <a href="{% url 'reback:customers' %}" class="{% if 'customers' in request.path %}active{% endif %}">
                        <i class="ri-user-line"></i> Khách hàng
                    </a>
                </li>
                <li>
                    <a href="{% url 'reback:schedules' %}" class="{% if 'schedules' in request.path %}active{% endif %}">
                        <i class="ri-calendar-line"></i> Lịch học
                    </a>
                </li>
                <li>
                    <a href="{% url 'reback:payments' %}" class="{% if 'payments' in request.path %}active{% endif %}">
                        <i class="ri-money-dollar-circle-line"></i> Đơn hàng
                    </a>
                </li>
                <li>
                    <a href="{% url 'reback:instructors' %}" class="{% if 'instructors' in request.path %}active{% endif %}">
                        <i class="ri-team-line"></i> Huấn luyện viên
                    </a>
                </li>
                <li>
                    <a href="/admin/">
                        <i class="ri-settings-3-line"></i> Admin gốc
                    </a>
                </li>
            </ul>
        </div>

        <div class="main-content">
            <div class="container-fluid">
                {% block breadcrumbs %}
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'reback:index' %}">Dashboard</a></li>
                        {% block breadcrumb_items %}{% endblock %}
                    </ol>
                </nav>
                {% endblock %}
                
                {% block page_title %}
                <h1 class="page-heading">{% block page_heading %}Dashboard{% endblock %}</h1>
                {% endblock %}
                
                {% block content %}{% endblock content %}
            </div>
        </div>
    </div>

    {% block javascript %}
    <script defer src="{% static 'js/vendors.min.js' %}"></script>
    <script defer src="{% static 'js/app.min.js' %}"></script>
    <!-- Bootstrap JS từ CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    {% block extra_javascript %}{% endblock extra_javascript %}
    {% endblock javascript %}

</body>
</html> 